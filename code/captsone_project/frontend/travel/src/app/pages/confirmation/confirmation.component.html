@if (booking; as b) {

<div class="container my-4"> <div class="d-flex justify-content-between align-items-start mb-3"> <div> <div class="small text-muted">Flight Ticket (one way)</div> <div class="ticket-title">Booking ID: {{ b.id }}</div> </div> <div class="text-end"> <div class="small text-muted">Booked on</div> <div class="ticket-title">{{ bookedOn }}</div> </div> </div>
<div #ticket class="ticket-card">
  <div class="ticket-header">
    <div>
      <div class="route-title">{{ flight?.origin }} → {{ flight?.destination }}</div>
      <div class="small text-muted">
        {{ prettyDate(flight?.departureDate) }} • {{ stopsLabel(flight?.stops) }} • {{ duration(flight?.durationMinutes) }}
      </div>
    </div>
    <div class="pnr-badge">
      <div>PNR</div>
      <div class="pnr-code">{{ pnr }}</div>
    </div>
  </div>

  <div class="airline-row">
    <div class="airline-name">{{ flight?.airline }}</div>
    <div class="flight-no">Flight: {{ flight?.flightNumber }}</div>
    <div class="aircraft">Aircraft: {{ flight?.aircraftName }}</div>
  </div>

  <div class="row g-3 align-items-start">
    <div class="col-md-4">
      <div class="time-city">
        <div class="time">{{ formatTime(flight?.departureTime) }}</div>
        <div class="city">{{ flight?.origin }} <span class="code">({{ codeFor(flight?.origin || '') }})</span></div>
      </div>
      <div class="airport small text-muted">{{ nameFor(flight?.origin || '') }}</div>
    </div>

    <div class="col-md-4 text-center">
      <div class="duration-chip">
        {{ duration(flight?.durationMinutes) }}
      </div>
      <div class="stops small text-muted">{{ stopsLabel(flight?.stops) }}</div>
    </div>

    <div class="col-md-4 text-end">
      <div class="time-city">
        <div class="time">{{ formatTime(flight?.arrivalTime) }}</div>
        <div class="city">{{ flight?.destination }} <span class="code">({{ codeFor(flight?.destination || '') }})</span></div>
      </div>
      <div class="airport small text-muted">{{ nameFor(flight?.destination || '') }}</div>
    </div>
  </div>

  <div class="extras small text-muted mt-3">
    Cabin Baggage: 7 Kgs / Adult • Check‑In Baggage: 15 Kgs / Adult
  </div>

  <hr>

  <div class="row g-2">
    <div class="col-md-9">
      <div class="traveller-block">
        <div class="label">Traveller(s) & Seats</div>
        <div class="value">
          @for (p of b.passengers; track p; let i = $index) { <div>{{ i + 1 }}. {{ p.fullName }} — Seat: {{ seats[i] }}</div> }
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="traveller-block">
        <div class="label">E‑TICKET NO</div>
        <div class="value">{{ eTicketNo }}</div>
      </div>
    </div>
  </div>

  <div class="amount-row">
    <div class="left small text-muted">You have paid</div>
    <div class="amt">₹ {{ amountPaid | number:'1.0-0' }}</div>
  </div>
</div>

<div class="mt-3 d-flex gap-2">
  <button class="btn btn-primary" (click)="downloadPdf()">Download Ticket (PDF)</button>
  <a class="btn btn-outline-secondary" routerLink="/">New Search</a>
</div>

</div> } @else { <div class="container my-4">Loading booking...</div> }